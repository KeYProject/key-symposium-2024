{% extends "base.html" %}

{% macro user(name) -%}
{% if name is string %}
<span class="chip">
  <!--
  {% if site.persons.get(name,None).image %}
  <img src="{{site.persons.get(name,None).image}}" class="avatar avatar-sm">
  {%endif%}
   -->
  <a href="{{site.persons.get(name,None).link}}">{{name}}</a>
</span>
{%else%}
{%for n in name%}{{user(n)}}{%endfor%}
{%endif%}
{%- endmacro %}

{% macro session(name, chair, slots) -%}
<span class="session" style="font-weight:bold;">
  Session: {{name}} &mid;
  Chair:  {{user(chair)}}
</span><br>
{%for s in slots%} {{talk(s)}}{%endfor%}
{%- endmacro %}

{% macro talk(slotId) -%}
{% if slotId in bySlot %}
{% set t = bySlot[slotId] %}
<p class="slot {{t.meta.type}} L{{t.meta.length}}" id="slot-{{slotId}}">
  <!-- {{slotId}} -->
  <span class="bg-error label">Slot:{{slotId}}</span>
  <a href="#talk-{{slotId}}">{{ t.meta.title }}</a>
  <span class="label time"> {{ t.meta.length }} min. </span>
  <br>
  {{user(t.meta.author)}}
</p>

{% else %}
<span class="bg-error label">
  Slot {{slotId}} not assigned to a talk.
</span>
{% endif %}
{%- endmacro %}

{% block content %}

<h1>Prelimniary Programme</h1>
<h3>more like a draft than final</h3>

<p>
<a href="events.ics">Program is also available as an ical file,
  that can be subscribed in your calender app</a>
</p>

<style>
 p.slot { padding:2ex; margin:0;}

 .L15  {
   background: #f7f8f9;
 }

 p.L60, p.invited { /* invited talks */
   background: #5755d9;
   color:white;
   font-weight:bold;
 }

 .L60 a { color:white;  }
 .L60 .chip a { color:black;  }

 summary {
   font-size:100%;
 }

 details.day > summary {
   font-size:150%;
   font-weight: bold;
   margin: -0.5em -0.5em 0;
   padding: 0.5em;
 }

 details.day {
   border: 1px solid #aaa;
   border-radius: 4px;
   padding: 0.5em 0.5em 0;
 }

 .talks {
   margin-left:10em;
   margin-right:10em;
   width:auto;
 }

 .talk-entry {
   border: 1px solid #5755d9;
   margin-top:3ex;
   padding: 2ex;
 }

</style>

<details class="day" open>
  <summary>
    Day 0 - Monday, 29th July
  </summary>

  <table class="table">
    <colgroup>
      <column width="20%" />
      <column width="80%"/>
    </colgroup>
    <tr>
      <th>#</th>
      <th>Topic</th>
    </tr>

    <tr class="social">
      <th>13:00 &ndash; 17:00</th>
      <td>{{talk(999)}}</td>
    </tr>

    <tr class="">
      <th>17:00 &ndash; 18:00</th>
      <td>Registration</td>
    </tr>

    <tr class="break">
      <th>18:00 &ndash;19:00</th>
      <td>Dinner at Haus der Kirche</td>
    </tr>

    <tr>
      <th>19:00 &ndash;</th><td>Getting Together</td>
    </tr>

    <tr>
      <th>20:00 &ndash; 21:00</th><td>Meeting of the Programme Board</td>
    </tr>
  </table>
</details>

<details class="day" open>
  <summary>Day 1 &ndash; Tuesday, 30th July</summary>
  <table class="table">
    <colgroup>
      <column width="20%" />
      <column width="80%"/>
    </colgroup>

    <tr>
      <th>#</th>
      <th>Topic</th>
    </tr>

    <tr>
      <th>08:45 &ndash;09:00</th>
      <td>{{ talk(10) }}</td>
    </tr>

    <tr>
      <th>09:00 &ndash;10:30</th>
      <td>
	{{ session("Probabilism", "Alexander Weigl", [11,12,123]) }}
      </td>
    </tr>

    <tr class="break">
      <th>10:30 &ndash; 11:00</th>
      <td>Coffee</td>
    </tr>

    <tr>
      <th>11:00  &ndash; 12:30</th>
      <td>
	{{ session("Verification with Legal Aspects", "Wolfgang Ahrendt", [19,191,192,193,194]) }}
      </td>
    </tr>

    <tr class="break">
      <th>12:30  &ndash; 14:00</th>
      <td>Lunch</td>
    </tr>

    <tr class="track-key">
      <th>
	14:00  &ndash; 15:30
	<br>
	Room: SR7+8
      </th>
      <td>{{ session("#7a", "Mattias Ulbrich", [116,117,118]) }}</td>
    </tr>

    <tr class="track-keymaera">
      <th>
	14:00  &ndash; 15:30
	<br>
	Room: SR6
      </th>
      <td>{{ session("#7b", "Andre Platzer", [216,217,218]) }}</td>
    </tr>

    <tr class="break">
      <td>
	15:30  &ndash; 16:00
      </td>
      <td>Coffee</td>
    </tr>

    <tr class="track-key">
      <td>
	16:00  &ndash; 17:30
	<br>
	Room: SR7+8
      </td>
      <td>{{ session("#6a", "Richard Bubel", [113,114,115]) }}</td>
    </tr>

    <tr class="track-keymaera">
      <td>16:00  &ndash; 17:45</td>
      <td>{{ session("#6b", "Enguerrand Prebet", [213,214,215,219]) }}</td>
    </tr>

    <tr class="break">
      <td>18:00  &ndash; 19:00</td>
      <td>Dinner at HdK </td>
    </tr>

    <tr class="social">
      <td>19:00  &ndash;</td>
      <td>{{talk(998)}}</td>
    </tr>
  </table>
</details>


<details class="day" open>
  <summary>Day 2 &ndash; Wednesday, 31th July</summary>

  <table class="table">
    <colgroup>
      <column width="20%" />
      <column width="80%"/>
    </colgroup>

    <tr>
      <th>#</th>
      <th>Topic</th>
    </tr>

    <tr>
      <th>09:00 &ndash;10:30</th>
      <td>{{ session("Formal Methods for CPS", "X", [20,21,22]) }}</td>
    </tr>

    <tr class="break">
      <th>10:30 &ndash;11:00</th>
      <td>Coffee</td>
    </tr>

    <tr>
      <th>11:00  &ndash; 12:30</th>
      <td>
	{{ session("#2", "X", [13,14,15]) }}
      </td>
    </tr>

    <tr class="break">
      <th>12:30  &ndash; 14:00</th>
      <td>Lunch</td>
    </tr>

    <tr class="">
      <th>14:00  &ndash; 15:30</th>
      <td>{{ session("#3", "X", [207,208,209]) }}</td>
    </tr>

    <tr class="break">
      <th>15:30  &ndash; 16:00</th>
      <td>Coffee</td>
    </tr>

    <tr>
      <th>16:00  &ndash; 18:00</th>
      <td>{{ session("Intersymbolic AI", "Ina Schaefer", [16,17,18,199,1999]) }}</td>
    </tr>

    <tr class="break">
      <td>18:30  &ndash;</td>
      <td>Dinner outside</td>
    </tr>
  </table>
</details>

<details class="day" open>
  <summary>Day 3 &ndash; Thursday, 1st August</summary>
  <table class="table">
    <colgroup>
      <column width="20%" />
      <column width="80%"/>
    </colgroup>
    <tr>
      <th>#</th>
      <th>Topic</th>
    </tr>

    <tr>
      <th>09:00 &ndash; 10:30</th>
      <td>
	{{ session("#8", "X", [30,31, 301]) }}
      </td>
    </tr>

    <tr class="break">
      <th>10:30 &ndash;11:00</th>
      <td>Coffee</td>
    </tr>

    <tr>
      <th>11:00  &ndash; 12:30</th>
      <td>
	{{ session("#8", "X", [32,33,34,35,37,38]) }}
      </td>
    </tr>

    <tr>
      <th>12:20  &ndash; 12:30</th>
      <td>
	{{ session("Closing", "&mdash;", [36]) }}
      </td>
    </tr>

    <tr class="break">
      <th>12:30  &ndash; 14:00</th>
      <td>Lunch</td>
    </tr>
  </table>
</details>

<h2>Talks</h2>
<div class="talks">
  {% for t in talks %}
  <div class="talk-entry {{t.meta.type}}">
    <h3 id="talk-{{t.meta.slot}}">
      <a href="#slot-{{t.meta.slot}}">{{t.meta.title}}</a>
      {% if t.meta.type == 'invited' -%}
      <span class="label bg-error">Invited Talk</span>
      {%elif t.meta.type == 'regular' -%}
      {%-endif%}
    </h3>
    <h4>{{user(t.meta.author)}}</h4>
    <div class="content">
      {{t.content | safe }}
    </div>
  </div>
  {% endfor %}
</div>

{% endblock %}
